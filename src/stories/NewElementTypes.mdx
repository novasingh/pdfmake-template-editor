---
title: New Element Types
description: Specification for new draggable block types to be added
---

# New Element Types Specification

This document specifies the new drag-and-drop block types to be added to the pdfmake-template-editor.

---

## Date Field Block

### Purpose
Display a formatted date with an optional label. Used for invoice dates, due dates, quote expiry dates, etc.

### TypeScript Interface

```typescript
export interface DateFieldElement extends BaseElement {
    type: 'date-field';
    label?: string;           // e.g., "Invoice Date", "Due Date"
    dateValue?: string;       // ISO date string
    dateFormat?: 'DD/MM/YYYY' | 'MM/DD/YYYY' | 'YYYY-MM-DD' | 'DD MMM YYYY';
    showLabel?: boolean;
    labelPosition?: 'inline' | 'above';
}
```

### Properties Panel

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| Label | text | "Date" | Label text |
| Date Value | date picker | today | Selected date |
| Format | select | DD/MM/YYYY | Date display format |
| Show Label | toggle | true | Show/hide label |
| Label Position | select | inline | Inline or above |

### Canvas Rendering

```
Inline:  Invoice Date: 20/01/2026
Above:   Invoice Date
         20/01/2026
```

### pdfmake Output

```javascript
{
    columns: [
        { text: 'Invoice Date:', width: 'auto', bold: true },
        { text: '20/01/2026', width: '*' }
    ],
    margin: [0, 0, 0, 5]
}
```

---

## Auto-Number Block

### Purpose
Automatically generate sequential document numbers with configurable prefix/suffix.

### TypeScript Interface

```typescript
export interface AutoNumberElement extends BaseElement {
    type: 'auto-number';
    label?: string;           // e.g., "Invoice Number"
    prefix?: string;          // e.g., "INV-"
    suffix?: string;          // e.g., "-2025"
    startValue?: number;      // Starting number
    currentValue?: number;    // Current number (managed by consumer)
    paddingDigits?: number;   // e.g., 4 for "0001"
    showLabel?: boolean;
}
```

### Properties Panel

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| Label | text | "Number" | Label text |
| Prefix | text | "" | Text before number |
| Suffix | text | "" | Text after number |
| Start Value | number | 1 | Starting number |
| Padding | number | 4 | Zero-padding digits |

### Canvas Rendering

```
Invoice Number: INV-0001
Quote #: Q-2025-0042
```

### pdfmake Output

```javascript
{
    text: [
        { text: 'Invoice Number: ', bold: true },
        { text: 'INV-0001' }
    ]
}
```

---

## Variable/Dynamic Field Block

### Purpose
Placeholder for dynamic data that will be replaced at runtime or when generating the PDF.

### TypeScript Interface

```typescript
export interface VariableElement extends BaseElement {
    type: 'variable';
    variableName: string;     // Key for variable lookup
    placeholder?: string;     // Display in editor when no value
    label?: string;
    fallback?: string;        // Default if variable not provided
}
```

### Predefined Variables

| Variable | Example Value |
|----------|---------------|
| `{{customerName}}` | "John Smith" |
| `{{customerCompany}}` | "Acme Pty Ltd" |
| `{{customerAddress}}` | "123 Main St, Sydney NSW 2000" |
| `{{customerEmail}}` | "john@acme.com" |
| `{{customerPhone}}` | "+61 2 1234 5678" |
| `{{companyName}}` | "Your Business" |
| `{{companyABN}}` | "12 345 678 901" |
| `{{companyAddress}}` | "456 Business St, Melbourne VIC 3000" |
| `{{invoiceNumber}}` | "INV-0001" |
| `{{invoiceDate}}` | "20/01/2026" |
| `{{dueDate}}` | "20/02/2026" |
| `{{quoteNumber}}` | "Q-0001" |
| `{{quoteValidUntil}}` | "20/02/2026" |
| `{{subtotal}}` | "$1,000.00" |
| `{{gst}}` | "$100.00" |
| `{{total}}` | "$1,100.00" |

### Properties Panel

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| Variable | dropdown | - | Select variable |
| Custom Key | text | - | Or enter custom key |
| Placeholder | text | "[Variable]" | Shown in editor |
| Fallback | text | "" | Default if not provided |

### Canvas Rendering

```
{{customerName}} displayed as: [Customer Name] (styled differently)
```

### pdfmake Output

Variables are resolved before PDF generation:

```javascript
// Template
{ text: '{{customerName}}' }

// Resolved (by consumer)
{ text: 'John Smith' }
```

---

## QR Code Block

### Purpose
Generate QR codes for payment URLs, links, or any text data.

### TypeScript Interface

```typescript
export interface QRCodeElement extends BaseElement {
    type: 'qrcode';
    data: string;             // Text/URL to encode
    size?: number;            // Width and height in px
    foreground?: string;      // Foreground color
    background?: string;      // Background color
    errorLevel?: 'L' | 'M' | 'Q' | 'H';
}
```

### Properties Panel

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| Data | textarea | - | Text/URL to encode |
| Size | number | 100 | Size in pixels |
| Foreground | color | #000000 | QR code color |
| Background | color | #ffffff | Background color |
| Error Level | select | M | Error correction |

### Canvas Rendering

Display actual QR code preview using a library like `qrcode.react`.

### pdfmake Output

pdfmake supports QR codes natively:

```javascript
{
    qr: 'https://example.com/pay/12345',
    fit: 100,
    foreground: '#000000',
    background: '#ffffff'
}
```

---

## List Block

### Purpose
Create ordered or unordered lists.

### TypeScript Interface

```typescript
export interface ListElement extends BaseElement {
    type: 'list';
    listType: 'ordered' | 'unordered';
    items: string[];
    bulletStyle?: 'disc' | 'circle' | 'square';
    numberStyle?: 'decimal' | 'lower-alpha' | 'upper-alpha' | 'lower-roman' | 'upper-roman';
    markerColor?: string;
}
```

### Properties Panel

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| List Type | toggle | unordered | Ordered/Unordered |
| Items | textarea | - | One item per line |
| Bullet Style | select | disc | For unordered |
| Number Style | select | decimal | For ordered |
| Marker Color | color | #000000 | Bullet/number color |

### Canvas Rendering

```
Unordered:                Ordered:
• Item one                1. First item
• Item two                2. Second item
• Item three              3. Third item
```

### pdfmake Output

```javascript
// Unordered
{
    ul: ['Item one', 'Item two', 'Item three'],
    type: 'circle'
}

// Ordered
{
    ol: ['First item', 'Second item', 'Third item'],
    type: 'lower-alpha'
}
```

---

## ABN Field Block

### Purpose
Australian Business Number field with validation and formatting.

### TypeScript Interface

```typescript
export interface ABNFieldElement extends BaseElement {
    type: 'abn-field';
    abnValue?: string;
    label?: string;
    showLabel?: boolean;
    format?: 'spaced' | 'plain';  // "XX XXX XXX XXX" or "XXXXXXXXXXX"
}
```

### Properties Panel

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| Label | text | "ABN" | Label text |
| ABN Value | text | - | 11-digit number |
| Format | select | spaced | Display format |
| Show Label | toggle | true | Show/hide label |

### Validation

```javascript
const validateABN = (abn: string): boolean => {
    const digits = abn.replace(/\D/g, '');
    if (digits.length !== 11) return false;
    
    // Official ABN validation algorithm
    const weights = [10, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19];
    let sum = 0;
    for (let i = 0; i < 11; i++) {
        const digit = parseInt(digits[i]);
        sum += (i === 0 ? digit - 1 : digit) * weights[i];
    }
    return sum % 89 === 0;
};
```

### Canvas Rendering

```
ABN: 12 345 678 901
```

---

## Bank Details Block

### Purpose
Display bank account details for payment.

### TypeScript Interface

```typescript
export interface BankDetailsElement extends BaseElement {
    type: 'bank-details';
    heading?: string;
    bankName?: string;
    accountName?: string;
    bsb?: string;
    accountNumber?: string;
    paymentReference?: string;
    showHeading?: boolean;
}
```

### Properties Panel

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| Heading | text | "Payment Details" | Section heading |
| Bank Name | text | - | Name of bank |
| Account Name | text | - | Account holder |
| BSB | text | - | 6-digit BSB |
| Account Number | text | - | Account number |
| Reference | text | - | Payment reference note |

### Canvas Rendering

```
PAYMENT DETAILS
Bank: Commonwealth Bank of Australia
Account Name: Your Business Pty Ltd
BSB: 062-000
Account: 12345678

Please include invoice number as payment reference.
```

### pdfmake Output

```javascript
{
    stack: [
        { text: 'PAYMENT DETAILS', bold: true, fontSize: 10, margin: [0, 0, 0, 5] },
        { text: 'Bank: Commonwealth Bank of Australia' },
        { text: 'Account Name: Your Business Pty Ltd' },
        { text: 'BSB: 062-000' },
        { text: 'Account: 12345678' },
        { text: '', margin: [0, 5, 0, 0] },
        { text: 'Please include invoice number as payment reference.', fontSize: 9, italics: true }
    ]
}
```
